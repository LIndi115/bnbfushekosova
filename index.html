<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STADIUMET BERATI - Vragoli</title>
    <style>
        :root { 
            --p: #00ff88; --d: #050505; --danger: #ff4757; 
            --glass: rgba(255, 255, 255, 0.05); --border: rgba(0, 255, 136, 0.2);
            --fusha1: #3498db; --fusha2: #f1c40f;
        }

        body { 
            font-family: 'Inter', sans-serif; background: var(--d); 
            background-image: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://images.unsplash.com/photo-1518604666860-9ed391f76460?q=80&w=2000&auto=format&fit=crop');
            background-size: cover; background-attachment: fixed; color: white; margin: 0; 
        }

        header { padding: 50px 20px; text-align: center; }
        header h1 { font-size: 3rem; margin: 0; letter-spacing: -2px; text-transform: uppercase; background: linear-gradient(to bottom, #fff 50%, var(--p)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .hero-btn { background: var(--p); color: #000; padding: 20px 40px; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 900; cursor: pointer; margin: 20px auto; display: block; text-transform: uppercase; box-shadow: 0 0 20px rgba(0,255,136,0.3); }

        .container { max-width: 1100px; margin: 20px auto; padding: 20px; }
        
        #adminSearchInput {
            display: none; width: 100%; padding: 15px; margin-bottom: 20px; border-radius: 12px;
            border: 1px solid var(--p); background: rgba(0,0,0,0.5); color: white; font-size: 1rem; box-sizing: border-box;
        }

        .grid-terminet { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        
        .card-rezervimi { background: var(--glass); backdrop-filter: blur(15px); border: 1px solid var(--border); border-radius: 20px; padding: 25px; position: relative; border-top: 4px solid var(--p); }
        
        .badge { display: inline-block; padding: 4px 10px; border-radius: 5px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; margin-top: 10px; margin-right: 5px; }
        .badge-f1 { background: var(--fusha1); color: white; }
        .badge-f2 { background: var(--fusha2); color: black; }
        .badge-javor { background: #ff00ea; color: white; }
        .badge-konfirmuar { background: rgba(0,255,136,0.1); color: var(--p); border: 1px solid var(--p); }
        
        .tel-box { color: var(--p); font-weight: bold; margin-top: 10px; }
        .timestamp { font-size: 0.75rem; color: #888; margin-top: 15px; display: block; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px; font-style: italic; }

        .admin-controls { display: none; margin-top: 15px; gap: 10px; }
        .delete-btn { background: var(--danger); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; flex: 1; }
        .javor-btn { background: #ff00ea; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; flex: 2; }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(20px); overflow-y: auto; }
        .modal-content { background: #111; margin: 30px auto; padding: 40px; width: 90%; max-width: 450px; border-radius: 24px; border: 1px solid var(--p); }
        
        label { display: block; margin-top: 15px; color: var(--p); font-size: 0.75rem; font-weight: bold; text-transform: uppercase; }
        input, select { width: 100%; padding: 16px; margin-top: 5px; border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; background: #1a1a1a; color: white; box-sizing: border-box; font-size: 1rem; }
        
        .btn-wa { background: var(--p); color: #000; border: none; padding: 18px; width: 100%; border-radius: 12px; margin-top: 30px; font-weight: 900; cursor: pointer; text-transform: uppercase; }

        .admin-section { text-align: center; margin: 50px 0; padding-bottom: 50px; }
        .admin-btn { background: none; border: 1px solid rgba(255,255,255,0.2); color: #666; padding: 8px 25px; border-radius: 20px; cursor: pointer; }
        .admin-active { border-color: var(--p); color: var(--p); }
    </style>
</head>
<body>

<header>
    <h1>STADIUMET BERATI</h1>
    <div style="color:var(--p); font-weight:bold; font-size: 1.4rem;">üìû 049 156 - 157</div>
    <p style="opacity:0.8;">VRAGOLI, FUSH√ã KOSOV√ã</p>
</header>

<button class="hero-btn" onclick="shfaqModalin()">+ Rezervo Fush√´n</button>

<div class="container">
    <input type="text" id="adminSearchInput" onkeyup="rifreskoBallinen(this.value)" placeholder="K√´rko ekipin me em√´r...">
    <h2 style="border-left:5px solid var(--p); padding-left:15px; text-transform: uppercase; font-size: 1.1rem;">Rezervimet e fundit</h2>
    <div id="ballina-list" class="grid-terminet"></div>
</div>

<div class="admin-section">
    <button id="btnAdmin" class="admin-btn" onclick="kycyAdmin()">‚öôÔ∏è Paneli Admin</button>
</div>

<div id="modalRezervimi" class="modal">
    <div class="modal-content">
        <h2 style="color:white; margin:0; text-align: center;">REZERVO TERMININ</h2>
        
        <label>Emri Mbiemri ose Ekipi</label>
        <input type="text" id="emri" placeholder="Emri i ekipit...">
        
        <label>Numri i Telefonit</label>
        <input type="tel" id="tel" placeholder="04x xxx xxx">
        
        <label>Zgjidh Dat√´n</label>
        <input type="date" id="data">
        
        <label>Zgjidh Dit√´n</label>
        <select id="ditaJaves">
            <option>E H√´n√´</option><option>E Mart√´</option><option>E M√´rkur√´</option>
            <option>E Enjte</option><option>E Premte</option><option>E Shtun√´</option><option>E Diel</option>
        </select>
        
        <label>Zgjidh Fush√´n</label>
        <select id="fusha">
            <option value="Fusha 1">Fusha 1</option>
            <option value="Fusha 2">Fusha 2</option>
        </select>
        
        <label>Zgjidh Or√´n</label>
        <select id="ora">
            <option>17:00</option><option>18:00</option><option>19:00</option>
            <option>20:00</option><option>21:00</option><option>22:00</option><option>23:00</option>
        </select>
        
        <button class="btn-wa" onclick="ruajDheDergo()">Rezervo n√´ WhatsApp</button>
        <button style="background:none; border:none; color:#666; width:100%; margin-top:15px; cursor:pointer;" onclick="mbyllModalin()">Mbyll</button>
    </div>
</div>

<script>
    let rezervimet = JSON.parse(localStorage.getItem('rezervimetBerati')) || [];
    let isAdmin = false;

    function kycyAdmin() {
        if(isAdmin) {
            isAdmin = false;
            document.getElementById('btnAdmin').classList.remove('admin-active');
            document.getElementById('adminSearchInput').style.display = 'none';
            rifreskoBallinen();
            return;
        }
        const pass = prompt("Fjal√´kalimi:");
        if(pass === "admin123") {
            isAdmin = true;
            document.getElementById('btnAdmin').classList.add('admin-active');
            document.getElementById('adminSearchInput').style.display = 'block';
            rifreskoBallinen();
        }
    }

    function shfaqModalin() { document.getElementById('modalRezervimi').style.display = 'block'; }
    function mbyllModalin() { document.getElementById('modalRezervimi').style.display = 'none'; }

    function ruajDheDergo() {
        const emri = document.getElementById('emri').value;
        const tel = document.getElementById('tel').value;
        const dataRaw = document.getElementById('data').value;
        const ditaJaves = document.getElementById('ditaJaves').value;
        const fusha = document.getElementById('fusha').value;
        const ora = document.getElementById('ora').value;

        if(!emri || !dataRaw) return alert("Plot√´soni t√´ dh√´nat!");

        // Kontrolli i dublikimit
        if(rezervimet.find(r => r.dataRaw === dataRaw && r.ora === ora && r.fusha === fusha)) {
            return alert("Ky termin √´sht√´ i z√´n√´!");
        }

        const d = new Date(dataRaw);
        const dataShqip = `${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()}`;
        const tani = new Date();
        const dataRezervimitFikse = tani.toLocaleDateString('sq-AL') + " " + tani.getHours() + ":" + tani.getMinutes();

        const rezervimiRi = { 
            id: Date.now(), emri, tel, dataRaw, dataShqip, ditaJaves, fusha, ora, 
            eshteJavor: false,
            krijuarMe: dataRezervimitFikse 
        };

        rezervimet.push(rezervimiRi);
        localStorage.setItem('rezervimetBerati', JSON.stringify(rezervimet));
        window.open(`https://wa.me/38344410456?text=*REZERVO*%0Aüë§ ${emri}%0AüìÖ ${dataShqip} (${ditaJaves})%0AüèüÔ∏è ${fusha}%0A‚è∞ Ora: ${ora}`, '_blank');
        rifreskoBallinen();
        mbyllModalin();
    }

    function rifreskoBallinen(filter = "") {
        const lista = document.getElementById('ballina-list');
        lista.innerHTML = "";
        const teFiltruara = rezervimet.filter(r => r.emri.toLowerCase().includes(filter.toLowerCase()));

        [...teFiltruara].reverse().forEach(res => {
            const badgeFusha = res.fusha === "Fusha 1" ? "badge-f1" : "badge-f2";
            let statusBadge = "";
            let dataInfo = "";

            if(res.eshteJavor) {
                statusBadge = '<div class="badge badge-javor">JAVOR</div>';
                dataInfo = `üìÖ √ádo t√´: <b>${res.ditaJaves}</b>`;
            } else {
                statusBadge = '<div class="badge badge-konfirmuar">I KONFIRMUAR</div>';
                dataInfo = `üìÖ ${res.ditaJaves}, ${res.dataShqip}`;
            }

            lista.innerHTML += `
                <div class="card-rezervimi">
                    <h3 style="margin:0;">${res.emri}</h3>
                    <div class="badge ${badgeFusha}">${res.fusha}</div>
                    ${statusBadge}
                    <p style="font-weight:bold; font-size:1.3rem; color: var(--p); margin: 15px 0 5px 0;">‚è∞ Ora: ${res.ora}</p>
                    <p style="margin:0; font-size:0.9rem;">${dataInfo}</p>
                    <p class="tel-box">${isAdmin ? 'üìû ' + res.tel : 'üìû 04x *** ***'}</p>
                    <span class="timestamp">U rezervua m√´: ${res.krijuarMe}</span>
                    <div class="admin-controls" style="${isAdmin ? 'display:flex' : 'none'}">
                        <button class="javor-btn" onclick="toggleJavor(${res.id})">Javor ON/OFF</button>
                        <button class="delete-btn" onclick="fshij(${res.id})">Fshij</button>
                    </div>
                </div>`;
        });
    }

    function fshij(id) { if(confirm("Fshije?")) { rezervimet = rezervimet.filter(r => r.id !== id); localStorage.setItem('rezervimetBerati', JSON.stringify(rezervimet)); rifreskoBallinen(); } }
    function toggleJavor(id) { 
        const idx = rezervimet.findIndex(r => r.id === id); 
        rezervimet[idx].eshteJavor = !rezervimet[idx].eshteJavor; 
        localStorage.setItem('rezervimetBerati', JSON.stringify(rezervimet)); 
        rifreskoBallinen(); 
    }

    window.onload = rifreskoBallinen;
</script>
</body>
</html>